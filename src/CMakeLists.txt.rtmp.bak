include_directories(
	"${CMAKE_SOURCE_DIR}/inc"
	"${CMAKE_SOURCE_DIR}/third_party"
	#"${CMAKE_SOURCE_DIR}/third_party/openssl-1.0.2h/include"
    /usr/include/opencv4
	)
link_directories(
	#"${CMAKE_SOURCE_DIR}/third_party/openssl-1.0.2h/"
)
aux_source_directory(. PROJECT_SOURCES)
aux_source_directory(${CMAKE_SOURCE_DIR}/third_party/cjson CJSON_SRC)
#aux_source_directory(${CMAKE_SOURCE_DIR}/third_party/librtmp RTMP_SRC)
aux_source_directory(${CMAKE_SOURCE_DIR}/third_party/tinylog TLOG_SRC)
add_executable(publisher ${PROJECT_SOURCES} ${CJSON_SRC} ${TLOG_SRC})

target_link_libraries(publisher PRIVATE -lrtmp)
#target_link_libraries(publisher PRIVATE -lz -lssl -lcrypto)
target_link_libraries(publisher PRIVATE faac asound )
target_link_libraries(publisher PRIVATE pthread)
target_link_libraries(publisher PRIVATE opencv_videoio opencv_imgproc opencv_core)
target_link_libraries(publisher PRIVATE opencv_highgui)
target_link_libraries(publisher PRIVATE x264)

set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++11 -O2 -Wall")
